////////////////////////////////////////////////////////////////////////////////
// core.cpp
////////////////////////////////////////////////////////////////////////////////

#include "core.h"

////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
s16 sin(u16 x)
{
	u32 xx = muluw32(x, 32768 - x);

	xx += xx;

	s16 s = divuw(xx, 40960 - (xx >> 16));

	return ((x < 32768) ? s : -s);
}

////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
s16 cos(u16 x)
{
	return sin(x + 16384);
}

////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
s32 tan(u16 x)
{
	return divsw(sin(x) << 14, cos(x));
}

////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
u16 rand(int& value)
{
	value = ((value + value + value) << 16) + muluw32(value, 17405) + 2531011;

	return (value >> 16);
}
