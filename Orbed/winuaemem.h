////////////////////////////////////////////////////////////////////////////////
// winuaemem.h
////////////////////////////////////////////////////////////////////////////////

#pragma once

#include "core.h"
#include "bigendian.h"
#include "orbed.h"

////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
struct WinUAEMem
{
	void* proc;		// WinUAE process handle.
	u8* base;		// WinUAE process base address.
	size_t size;	// WinUAE process region size.
	u8* buffer;		// Buffer with copy of WinUAE memory.
	OrbedTag* tag;	// Location of tag in buffer.
};

////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
bool WinUAEMem_Aquire(WinUAEMem& mem, const char* label);
void WinUAEMem_Release(WinUAEMem& mem);

////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
bool WinUAEMem_Read(WinUAEMem& mem, void* p, size_t size);
bool WinUAEMem_Write(WinUAEMem& mem, const void* p, size_t size);

////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
void* WinUAEMem_MakeHostPointer(WinUAEMem& mem, big_p32 p);
big_p32 WinUAEMem_MakeTargetPointer(WinUAEMem& mem, void* p);
